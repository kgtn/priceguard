2024-12-07 15:37:17,433 - __main__ - INFO - Loading configuration...
2024-12-07 15:37:17,434 - __main__ - ERROR - Error in main function: ADMIN_USER_ID must be a valid integer
Traceback (most recent call last):
  File "/Users/kagitin/CascadeProjects/priceguard/src/core/config.py", line 63, in load_config
    admin_user_id = int(os.getenv('ADMIN_USER_ID'))
ValueError: invalid literal for int() with base 10: 'your_admin_telegram_id'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/kagitin/CascadeProjects/priceguard/src/main.py", line 34, in main
    config = load_config()
  File "/Users/kagitin/CascadeProjects/priceguard/src/core/config.py", line 65, in load_config
    raise ValueError("ADMIN_USER_ID must be a valid integer")
ValueError: ADMIN_USER_ID must be a valid integer
2024-12-07 15:41:33,319 - __main__ - INFO - Loading configuration...
2024-12-07 15:41:33,320 - __main__ - ERROR - Error in main function: ADMIN_USER_ID must be a valid integer
Traceback (most recent call last):
  File "/Users/kagitin/CascadeProjects/priceguard/src/core/config.py", line 63, in load_config
    admin_user_id = int(os.getenv('ADMIN_USER_ID'))
ValueError: invalid literal for int() with base 10: 'your_admin_telegram_id'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/kagitin/CascadeProjects/priceguard/src/main.py", line 34, in main
    config = load_config()
  File "/Users/kagitin/CascadeProjects/priceguard/src/core/config.py", line 65, in load_config
    raise ValueError("ADMIN_USER_ID must be a valid integer")
ValueError: ADMIN_USER_ID must be a valid integer
2024-12-07 15:42:12,247 - __main__ - INFO - Loading configuration...
2024-12-07 15:42:12,248 - __main__ - ERROR - Error in main function: ADMIN_USER_ID must be a valid integer
Traceback (most recent call last):
  File "/Users/kagitin/CascadeProjects/priceguard/src/core/config.py", line 63, in load_config
    admin_user_id = int(os.getenv('ADMIN_USER_ID'))
ValueError: invalid literal for int() with base 10: 'your_admin_telegram_id'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/kagitin/CascadeProjects/priceguard/src/main.py", line 34, in main
    config = load_config()
  File "/Users/kagitin/CascadeProjects/priceguard/src/core/config.py", line 65, in load_config
    raise ValueError("ADMIN_USER_ID must be a valid integer")
ValueError: ADMIN_USER_ID must be a valid integer
2024-12-07 15:45:02,821 - __main__ - INFO - Loading configuration...
2024-12-07 15:45:02,822 - __main__ - ERROR - Error in main function: ADMIN_USER_ID must be a valid integer
Traceback (most recent call last):
  File "/Users/kagitin/CascadeProjects/priceguard/src/core/config.py", line 63, in load_config
    admin_user_id = int(os.getenv('ADMIN_USER_ID'))
ValueError: invalid literal for int() with base 10: 'your_admin_telegram_id'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/kagitin/CascadeProjects/priceguard/src/main.py", line 34, in main
    config = load_config()
  File "/Users/kagitin/CascadeProjects/priceguard/src/core/config.py", line 65, in load_config
    raise ValueError("ADMIN_USER_ID must be a valid integer")
ValueError: ADMIN_USER_ID must be a valid integer
2024-12-07 15:47:20,172 - __main__ - INFO - Loading configuration...
2024-12-07 15:47:20,173 - __main__ - ERROR - Error in main function: ADMIN_USER_ID must be a valid integer
Traceback (most recent call last):
  File "/Users/kagitin/CascadeProjects/priceguard/src/core/config.py", line 63, in load_config
    admin_user_id = int(os.getenv('ADMIN_USER_ID'))
ValueError: invalid literal for int() with base 10: 'your_admin_telegram_id'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/kagitin/CascadeProjects/priceguard/src/main.py", line 34, in main
    config = load_config()
  File "/Users/kagitin/CascadeProjects/priceguard/src/core/config.py", line 65, in load_config
    raise ValueError("ADMIN_USER_ID must be a valid integer")
ValueError: ADMIN_USER_ID must be a valid integer
2024-12-07 15:49:21,445 - __main__ - INFO - Loading configuration...
2024-12-07 15:49:21,446 - __main__ - ERROR - Error in main function: ADMIN_USER_ID must be a valid integer
Traceback (most recent call last):
  File "/Users/kagitin/CascadeProjects/priceguard/src/core/config.py", line 63, in load_config
    admin_user_id = int(os.getenv('ADMIN_USER_ID'))
ValueError: invalid literal for int() with base 10: 'your_admin_telegram_id'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/kagitin/CascadeProjects/priceguard/src/main.py", line 34, in main
    config = load_config()
  File "/Users/kagitin/CascadeProjects/priceguard/src/core/config.py", line 65, in load_config
    raise ValueError("ADMIN_USER_ID must be a valid integer")
ValueError: ADMIN_USER_ID must be a valid integer
2024-12-07 15:50:58,480 - __main__ - INFO - Loading configuration...
2024-12-07 15:50:58,481 - __main__ - ERROR - Error in main function: ADMIN_USER_ID must be a valid integer
Traceback (most recent call last):
  File "/Users/kagitin/CascadeProjects/priceguard/src/core/config.py", line 68, in load_config
    admin_user_id = int(os.getenv('ADMIN_USER_ID'))
ValueError: invalid literal for int() with base 10: 'your_admin_telegram_id'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/kagitin/CascadeProjects/priceguard/src/main.py", line 34, in main
    config = load_config()
  File "/Users/kagitin/CascadeProjects/priceguard/src/core/config.py", line 71, in load_config
    raise ValueError("ADMIN_USER_ID must be a valid integer")
ValueError: ADMIN_USER_ID must be a valid integer
2024-12-07 15:52:01,219 - __main__ - INFO - Loading configuration...
2024-12-07 15:52:01,220 - __main__ - ERROR - Error in main function: ADMIN_USER_ID must be a valid integer
Traceback (most recent call last):
  File "/Users/kagitin/CascadeProjects/priceguard/src/core/config.py", line 68, in load_config
    admin_user_id = int(os.getenv('ADMIN_USER_ID'))
ValueError: invalid literal for int() with base 10: 'your_admin_telegram_id'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/kagitin/CascadeProjects/priceguard/src/main.py", line 34, in main
    config = load_config()
  File "/Users/kagitin/CascadeProjects/priceguard/src/core/config.py", line 71, in load_config
    raise ValueError("ADMIN_USER_ID must be a valid integer")
ValueError: ADMIN_USER_ID must be a valid integer
2024-12-07 15:53:14,022 - __main__ - INFO - Loading configuration...
2024-12-07 15:53:14,023 - __main__ - INFO - Initializing bot...
2024-12-07 15:53:14,043 - __main__ - ERROR - Error in main function: Passing `parse_mode`, `disable_web_page_preview` or `protect_content` to Bot initializer is not supported anymore. These arguments have been removed in 3.7.0 version. Use `default=DefaultBotProperties(parse_mode='HTML')` argument instead.
Traceback (most recent call last):
  File "/Users/kagitin/CascadeProjects/priceguard/src/main.py", line 38, in main
    bot = Bot(token=config.telegram.token, parse_mode="HTML")
  File "/Users/kagitin/CascadeProjects/priceguard/venv/lib/python3.13/site-packages/aiogram/client/bot.py", line 310, in __init__
    raise TypeError(
    ...<3 lines>...
    )
TypeError: Passing `parse_mode`, `disable_web_page_preview` or `protect_content` to Bot initializer is not supported anymore. These arguments have been removed in 3.7.0 version. Use `default=DefaultBotProperties(parse_mode='HTML')` argument instead.
2024-12-07 16:08:44,192 - __main__ - INFO - Loading configuration...
2024-12-07 16:08:44,194 - __main__ - INFO - Initializing bot...
2024-12-07 16:08:44,211 - __main__ - INFO - Initializing database...
2024-12-07 16:08:44,211 - __main__ - ERROR - Error in main function: object Database can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/kagitin/CascadeProjects/priceguard/src/main.py", line 43, in main
    db = await Database(config.database.path)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object Database can't be used in 'await' expression
2024-12-07 16:09:47,953 - __main__ - INFO - Loading configuration...
2024-12-07 16:09:47,954 - __main__ - INFO - Initializing bot...
2024-12-07 16:09:47,971 - __main__ - INFO - Initializing database...
2024-12-07 16:09:47,971 - __main__ - ERROR - Error in main function: 'Config' object has no attribute 'encryption'
Traceback (most recent call last):
  File "/Users/kagitin/CascadeProjects/priceguard/src/main.py", line 46, in main
    marketplace_factory = MarketplaceFactory(encryption_key=config.encryption.key)
                                                            ^^^^^^^^^^^^^^^^^
AttributeError: 'Config' object has no attribute 'encryption'. Did you mean: 'encryption_key'?
2024-12-07 16:10:35,017 - __main__ - INFO - Loading configuration...
2024-12-07 16:10:35,018 - __main__ - INFO - Initializing bot...
2024-12-07 16:10:35,036 - __main__ - INFO - Initializing database...
2024-12-07 16:10:35,036 - __main__ - ERROR - Error in main function: Fernet key must be 32 url-safe base64-encoded bytes.
Traceback (most recent call last):
  File "/Users/kagitin/CascadeProjects/priceguard/venv/lib/python3.13/site-packages/cryptography/fernet.py", line 34, in __init__
    key = base64.urlsafe_b64decode(key)
  File "/usr/local/Cellar/python@3.13/3.13.0_1/Frameworks/Python.framework/Versions/3.13/lib/python3.13/base64.py", line 134, in urlsafe_b64decode
    return b64decode(s)
  File "/usr/local/Cellar/python@3.13/3.13.0_1/Frameworks/Python.framework/Versions/3.13/lib/python3.13/base64.py", line 88, in b64decode
    return binascii.a2b_base64(s, strict_mode=validate)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
binascii.Error: Incorrect padding

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/kagitin/CascadeProjects/priceguard/src/main.py", line 46, in main
    marketplace_factory = MarketplaceFactory(encryption_key=config.encryption_key)
  File "/Users/kagitin/CascadeProjects/priceguard/src/services/marketplaces/factory.py", line 22, in __init__
    self.fernet = Fernet(encryption_key.encode())
                  ~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/kagitin/CascadeProjects/priceguard/venv/lib/python3.13/site-packages/cryptography/fernet.py", line 36, in __init__
    raise ValueError(
        "Fernet key must be 32 url-safe base64-encoded bytes."
    ) from exc
ValueError: Fernet key must be 32 url-safe base64-encoded bytes.
2024-12-07 16:11:49,069 - __main__ - INFO - Loading configuration...
2024-12-07 16:11:49,070 - __main__ - INFO - Initializing bot...
2024-12-07 16:11:49,087 - __main__ - INFO - Initializing database...
2024-12-07 16:11:49,088 - __main__ - ERROR - Error in main function: NotificationService.__init__() got an unexpected keyword argument 'database'
Traceback (most recent call last):
  File "/Users/kagitin/CascadeProjects/priceguard/src/main.py", line 49, in main
    notification_service = NotificationService(bot=bot, database=db)
TypeError: NotificationService.__init__() got an unexpected keyword argument 'database'
2024-12-07 16:12:53,171 - __main__ - INFO - Loading configuration...
2024-12-07 16:12:53,172 - __main__ - INFO - Initializing bot...
2024-12-07 16:12:53,190 - __main__ - INFO - Initializing database...
2024-12-07 16:12:53,190 - __main__ - ERROR - Error in main function: PromotionMonitor.__init__() got an unexpected keyword argument 'database'
Traceback (most recent call last):
  File "/Users/kagitin/CascadeProjects/priceguard/src/main.py", line 52, in main
    monitor = PromotionMonitor(
        database=db,
        notification_service=notification_service,
        client_factory=marketplace_factory
    )
TypeError: PromotionMonitor.__init__() got an unexpected keyword argument 'database'
2024-12-07 16:13:45,147 - __main__ - INFO - Loading configuration...
2024-12-07 16:13:45,148 - __main__ - INFO - Initializing bot...
2024-12-07 16:13:45,165 - __main__ - INFO - Initializing database...
2024-12-07 16:13:45,166 - __main__ - ERROR - Error in main function: 'Database' object has no attribute 'telegram'
Traceback (most recent call last):
  File "/Users/kagitin/CascadeProjects/priceguard/src/main.py", line 58, in main
    setup_middlewares(dp, db)
    ~~~~~~~~~~~~~~~~~^^^^^^^^
  File "/Users/kagitin/CascadeProjects/priceguard/src/bot/middlewares/__init__.py", line 20, in setup_middlewares
    dp.message.middleware(AuthMiddleware(config.telegram.admin_user_id))
                                         ^^^^^^^^^^^^^^^
AttributeError: 'Database' object has no attribute 'telegram'
2024-12-07 16:14:34,897 - __main__ - INFO - Loading configuration...
2024-12-07 16:14:34,898 - __main__ - INFO - Initializing bot...
2024-12-07 16:14:34,918 - __main__ - INFO - Initializing database...
2024-12-07 16:14:34,918 - __main__ - ERROR - Error in main function: register_all_handlers() missing 2 required positional arguments: 'config' and 'db'
Traceback (most recent call last):
  File "/Users/kagitin/CascadeProjects/priceguard/src/main.py", line 66, in main
    register_all_handlers(dp)
    ~~~~~~~~~~~~~~~~~~~~~^^^^
TypeError: register_all_handlers() missing 2 required positional arguments: 'config' and 'db'
2024-12-07 16:15:22,679 - __main__ - INFO - Loading configuration...
2024-12-07 16:15:22,680 - __main__ - INFO - Initializing bot...
2024-12-07 16:15:22,697 - __main__ - INFO - Initializing database...
2024-12-07 16:15:22,697 - services.monitoring.monitor - INFO - Started promotion monitoring task
2024-12-07 16:15:22,697 - __main__ - INFO - Starting bot...
2024-12-07 16:15:22,697 - aiogram.dispatcher - INFO - Start polling
2024-12-07 16:15:22,698 - services.monitoring.monitor - ERROR - Error in monitoring loop: 'Database' object has no attribute 'get_active_subscriptions'
2024-12-07 16:15:23,316 - aiogram.dispatcher - INFO - Run polling for bot @priceguarddev_bot id=7683347152 - 'priceguarddev'
2024-12-07 16:16:35,310 - aiogram.event - INFO - Update id=20180897 is not handled. Duration 0 ms by bot id=7683347152
2024-12-07 16:16:35,311 - aiogram.event - ERROR - Cause exception while process update id=20180897 by bot id=7683347152
RuntimeError: Database not initialized
Traceback (most recent call last):
  File "/Users/kagitin/CascadeProjects/priceguard/venv/lib/python3.13/site-packages/aiogram/dispatcher/dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/kagitin/CascadeProjects/priceguard/venv/lib/python3.13/site-packages/aiogram/dispatcher/dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "/Users/kagitin/CascadeProjects/priceguard/venv/lib/python3.13/site-packages/aiogram/dispatcher/middlewares/error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/kagitin/CascadeProjects/priceguard/venv/lib/python3.13/site-packages/aiogram/dispatcher/middlewares/user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/kagitin/CascadeProjects/priceguard/venv/lib/python3.13/site-packages/aiogram/fsm/middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/kagitin/CascadeProjects/priceguard/venv/lib/python3.13/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/kagitin/CascadeProjects/priceguard/venv/lib/python3.13/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "/Users/kagitin/CascadeProjects/priceguard/venv/lib/python3.13/site-packages/aiogram/dispatcher/dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/kagitin/CascadeProjects/priceguard/venv/lib/python3.13/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/kagitin/CascadeProjects/priceguard/venv/lib/python3.13/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/kagitin/CascadeProjects/priceguard/venv/lib/python3.13/site-packages/aiogram/dispatcher/router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/kagitin/CascadeProjects/priceguard/venv/lib/python3.13/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/kagitin/CascadeProjects/priceguard/venv/lib/python3.13/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/kagitin/CascadeProjects/priceguard/venv/lib/python3.13/site-packages/aiogram/dispatcher/router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/kagitin/CascadeProjects/priceguard/venv/lib/python3.13/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/kagitin/CascadeProjects/priceguard/src/bot/middlewares/auth.py", line 38, in __call__
    user_data = await db.get_user(user.id)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/kagitin/CascadeProjects/priceguard/src/core/database.py", line 149, in get_user
    raise RuntimeError("Database not initialized")
RuntimeError: Database not initialized
2024-12-07 16:16:49,574 - aiogram.dispatcher - WARNING - Received SIGINT signal
2024-12-07 16:16:49,575 - aiogram.dispatcher - INFO - Polling stopped for bot @priceguarddev_bot id=7683347152 - 'priceguarddev'
2024-12-07 16:16:49,575 - aiogram.dispatcher - INFO - Polling stopped
2024-12-07 16:17:35,338 - __main__ - INFO - Loading configuration...
2024-12-07 16:17:35,339 - __main__ - INFO - Initializing bot...
2024-12-07 16:17:35,356 - __main__ - INFO - Initializing database...
2024-12-07 16:17:35,370 - services.monitoring.monitor - INFO - Started promotion monitoring task
2024-12-07 16:17:35,370 - __main__ - INFO - Starting bot...
2024-12-07 16:17:35,370 - aiogram.dispatcher - INFO - Start polling
2024-12-07 16:17:35,370 - services.monitoring.monitor - ERROR - Error in monitoring loop: 'Database' object has no attribute 'get_active_subscriptions'
2024-12-07 16:17:35,697 - aiogram.dispatcher - INFO - Run polling for bot @priceguarddev_bot id=7683347152 - 'priceguarddev'
2024-12-07 16:17:45,462 - bot.middlewares.auth - INFO - New user registered: 743731
2024-12-07 16:17:46,034 - aiogram.event - INFO - Update id=20180898 is handled. Duration 575 ms by bot id=7683347152
2024-12-07 16:17:49,811 - aiogram.event - INFO - Update id=20180899 is handled. Duration 130 ms by bot id=7683347152
2024-12-07 16:18:10,441 - bot.middlewares.error - ERROR - Error processing event from user 743731: cmd_admin() missing 1 required positional argument: 'settings'
Traceback (most recent call last):
  File "/Users/kagitin/CascadeProjects/priceguard/src/bot/middlewares/error.py", line 21, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/kagitin/CascadeProjects/priceguard/venv/lib/python3.13/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
                 ~~~~~~~^^
TypeError: cmd_admin() missing 1 required positional argument: 'settings'
2024-12-07 16:18:10,933 - aiogram.event - INFO - Update id=20180900 is handled. Duration 492 ms by bot id=7683347152
2024-12-07 16:19:00,358 - aiogram.event - INFO - Update id=20180901 is handled. Duration 389 ms by bot id=7683347152
2024-12-07 16:19:03,541 - aiogram.event - INFO - Update id=20180902 is handled. Duration 402 ms by bot id=7683347152
2024-12-07 16:19:09,615 - aiogram.event - INFO - Update id=20180903 is not handled. Duration 1 ms by bot id=7683347152
2024-12-07 16:19:14,137 - aiogram.event - INFO - Update id=20180904 is not handled. Duration 1 ms by bot id=7683347152
2024-12-07 16:19:17,380 - aiogram.event - INFO - Update id=20180905 is handled. Duration 275 ms by bot id=7683347152
2024-12-07 16:19:23,036 - aiogram.event - INFO - Update id=20180906 is handled. Duration 111 ms by bot id=7683347152
2024-12-07 16:19:25,195 - aiogram.event - INFO - Update id=20180907 is not handled. Duration 1 ms by bot id=7683347152
2024-12-07 16:20:02,146 - aiogram.event - INFO - Update id=20180908 is handled. Duration 395 ms by bot id=7683347152
2024-12-07 16:20:25,531 - aiogram.dispatcher - WARNING - Received SIGINT signal
2024-12-07 16:20:25,531 - aiogram.dispatcher - INFO - Polling stopped for bot @priceguarddev_bot id=7683347152 - 'priceguarddev'
2024-12-07 16:20:25,532 - aiogram.dispatcher - INFO - Polling stopped
2024-12-07 16:21:21,233 - __main__ - INFO - Loading configuration...
2024-12-07 16:21:21,234 - __main__ - INFO - Initializing bot...
2024-12-07 16:21:21,250 - __main__ - INFO - Initializing database...
2024-12-07 16:21:21,252 - services.monitoring.monitor - INFO - Started promotion monitoring task
2024-12-07 16:21:21,252 - __main__ - INFO - Starting bot...
2024-12-07 16:21:21,252 - aiogram.dispatcher - INFO - Start polling
2024-12-07 16:21:21,252 - services.monitoring.monitor - ERROR - Error in monitoring loop: 'Database' object has no attribute 'get_active_subscriptions'
2024-12-07 16:21:21,976 - aiogram.dispatcher - INFO - Run polling for bot @priceguarddev_bot id=7683347152 - 'priceguarddev'
2024-12-07 16:21:31,351 - aiogram.event - INFO - Update id=20180909 is handled. Duration 389 ms by bot id=7683347152
2024-12-07 16:21:35,583 - bot.middlewares.error - ERROR - Error processing event from user 743731: cmd_admin() missing 1 required positional argument: 'settings'
Traceback (most recent call last):
  File "/Users/kagitin/CascadeProjects/priceguard/src/bot/middlewares/error.py", line 21, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/kagitin/CascadeProjects/priceguard/venv/lib/python3.13/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
                 ~~~~~~~^^
TypeError: cmd_admin() missing 1 required positional argument: 'settings'
2024-12-07 16:21:35,903 - aiogram.event - INFO - Update id=20180910 is handled. Duration 320 ms by bot id=7683347152
2024-12-07 16:22:19,866 - aiogram.dispatcher - WARNING - Received SIGINT signal
2024-12-07 16:22:19,867 - aiogram.dispatcher - INFO - Polling stopped for bot @priceguarddev_bot id=7683347152 - 'priceguarddev'
2024-12-07 16:22:19,867 - aiogram.dispatcher - INFO - Polling stopped
2024-12-07 16:22:41,629 - __main__ - INFO - Loading configuration...
2024-12-07 16:22:41,630 - __main__ - INFO - Initializing bot...
2024-12-07 16:22:41,649 - services.monitoring.monitor - INFO - Started promotion monitoring task
2024-12-07 16:22:41,650 - __main__ - INFO - Starting bot...
2024-12-07 16:22:41,650 - aiogram.dispatcher - INFO - Start polling
2024-12-07 16:22:41,650 - services.monitoring.monitor - ERROR - Error in monitoring loop: 'Database' object has no attribute 'get_active_subscriptions'
2024-12-07 16:22:42,286 - aiogram.dispatcher - INFO - Run polling for bot @priceguarddev_bot id=7683347152 - 'priceguarddev'
2024-12-07 16:22:50,752 - aiogram.event - INFO - Update id=20180911 is handled. Duration 398 ms by bot id=7683347152
2024-12-07 16:22:54,829 - bot.middlewares.error - ERROR - Error processing event from user 743731: 'Config' object has no attribute 'admin_user_id'
Traceback (most recent call last):
  File "/Users/kagitin/CascadeProjects/priceguard/src/bot/middlewares/error.py", line 21, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/kagitin/CascadeProjects/priceguard/venv/lib/python3.13/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "/Users/kagitin/CascadeProjects/priceguard/src/bot/handlers/admin.py", line 37, in cmd_admin
    if not await is_admin(message.from_user.id, settings):
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/kagitin/CascadeProjects/priceguard/src/bot/handlers/admin.py", line 32, in is_admin
    return str(user_id) == settings.admin_user_id
                           ^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Config' object has no attribute 'admin_user_id'
2024-12-07 16:22:55,093 - aiogram.event - INFO - Update id=20180912 is handled. Duration 265 ms by bot id=7683347152
2024-12-07 16:23:11,888 - aiogram.dispatcher - WARNING - Received SIGINT signal
2024-12-07 16:23:11,888 - aiogram.dispatcher - INFO - Polling stopped for bot @priceguarddev_bot id=7683347152 - 'priceguarddev'
2024-12-07 16:23:11,889 - aiogram.dispatcher - INFO - Polling stopped
2024-12-07 16:23:44,618 - __main__ - INFO - Loading configuration...
2024-12-07 16:23:44,619 - __main__ - INFO - Initializing bot...
2024-12-07 16:23:44,638 - services.monitoring.monitor - INFO - Started promotion monitoring task
2024-12-07 16:23:44,638 - __main__ - INFO - Starting bot...
2024-12-07 16:23:44,638 - aiogram.dispatcher - INFO - Start polling
2024-12-07 16:23:44,639 - services.monitoring.monitor - ERROR - Error in monitoring loop: 'Database' object has no attribute 'get_active_subscriptions'
2024-12-07 16:23:44,977 - aiogram.dispatcher - INFO - Run polling for bot @priceguarddev_bot id=7683347152 - 'priceguarddev'
2024-12-07 16:23:53,883 - aiogram.event - INFO - Update id=20180913 is handled. Duration 376 ms by bot id=7683347152
2024-12-07 16:23:57,845 - aiogram.event - INFO - Update id=20180914 is handled. Duration 141 ms by bot id=7683347152
2024-12-07 16:24:04,456 - aiogram.dispatcher - WARNING - Received SIGINT signal
2024-12-07 16:24:04,457 - aiogram.dispatcher - INFO - Polling stopped for bot @priceguarddev_bot id=7683347152 - 'priceguarddev'
2024-12-07 16:24:04,457 - aiogram.dispatcher - INFO - Polling stopped
2024-12-07 16:24:04,647 - aiogram.dispatcher - WARNING - Received SIGINT signal
2024-12-07 16:25:25,148 - __main__ - INFO - Loading configuration...
2024-12-07 16:25:25,149 - __main__ - INFO - Initializing bot...
2024-12-07 16:25:25,168 - services.monitoring.monitor - INFO - Started promotion monitoring task
2024-12-07 16:25:25,168 - __main__ - INFO - Starting bot...
2024-12-07 16:25:25,168 - aiogram.dispatcher - INFO - Start polling
2024-12-07 16:25:25,169 - services.monitoring.monitor - ERROR - Error in monitoring loop: 'Database' object has no attribute 'get_active_subscriptions'
2024-12-07 16:25:25,508 - aiogram.dispatcher - INFO - Run polling for bot @priceguarddev_bot id=7683347152 - 'priceguarddev'
2024-12-07 16:25:33,826 - aiogram.event - INFO - Update id=20180915 is handled. Duration 383 ms by bot id=7683347152
2024-12-07 16:25:36,610 - aiogram.event - INFO - Update id=20180916 is handled. Duration 199 ms by bot id=7683347152
2024-12-07 16:25:42,025 - aiogram.event - INFO - Update id=20180917 is handled. Duration 307 ms by bot id=7683347152
2024-12-07 16:25:45,015 - aiogram.event - INFO - Update id=20180918 is not handled. Duration 3 ms by bot id=7683347152
2024-12-07 16:25:48,270 - aiogram.event - INFO - Update id=20180919 is handled. Duration 284 ms by bot id=7683347152
2024-12-07 16:25:49,725 - aiogram.event - INFO - Update id=20180920 is handled. Duration 122 ms by bot id=7683347152
2024-12-07 16:25:52,365 - aiogram.event - INFO - Update id=20180921 is not handled. Duration 2 ms by bot id=7683347152
2024-12-07 16:25:53,434 - aiogram.event - INFO - Update id=20180922 is handled. Duration 130 ms by bot id=7683347152
2024-12-07 16:25:54,769 - aiogram.event - INFO - Update id=20180923 is handled. Duration 122 ms by bot id=7683347152
2024-12-07 16:25:59,258 - aiogram.event - INFO - Update id=20180924 is handled. Duration 134 ms by bot id=7683347152
2024-12-07 16:26:00,777 - aiogram.event - INFO - Update id=20180925 is handled. Duration 116 ms by bot id=7683347152
2024-12-07 16:26:03,072 - aiogram.event - INFO - Update id=20180926 is handled. Duration 261 ms by bot id=7683347152
2024-12-07 16:26:09,494 - aiogram.event - INFO - Update id=20180927 is handled. Duration 131 ms by bot id=7683347152
2024-12-07 16:26:11,270 - aiogram.event - INFO - Update id=20180928 is handled. Duration 119 ms by bot id=7683347152
2024-12-07 16:26:15,891 - aiogram.event - INFO - Update id=20180929 is handled. Duration 176 ms by bot id=7683347152
2024-12-07 16:26:37,220 - bot.middlewares.auth - INFO - New user registered: 1879978399
2024-12-07 16:26:37,639 - aiogram.event - INFO - Update id=20180930 is handled. Duration 420 ms by bot id=7683347152
2024-12-07 16:26:41,968 - aiogram.dispatcher - WARNING - Received SIGINT signal
2024-12-07 16:26:41,969 - aiogram.dispatcher - INFO - Polling stopped for bot @priceguarddev_bot id=7683347152 - 'priceguarddev'
2024-12-07 16:26:41,970 - aiogram.dispatcher - INFO - Polling stopped
2024-12-07 17:00:06,530 - __main__ - INFO - Loading configuration...
2024-12-07 17:00:06,531 - __main__ - INFO - Initializing bot...
2024-12-07 17:00:06,565 - services.monitoring.monitor - INFO - Started promotion monitoring task
2024-12-07 17:00:06,565 - __main__ - INFO - Starting bot...
2024-12-07 17:00:06,566 - aiogram.dispatcher - INFO - Start polling
2024-12-07 17:00:06,566 - services.monitoring.monitor - ERROR - Error in monitoring loop: 'Database' object has no attribute 'get_active_subscriptions'
2024-12-07 17:00:06,990 - aiogram.dispatcher - INFO - Run polling for bot @priceguarddev_bot id=7683347152 - 'priceguarddev'
2024-12-07 17:00:19,961 - aiogram.event - INFO - Update id=20180931 is handled. Duration 397 ms by bot id=7683347152
2024-12-07 17:00:30,558 - aiogram.dispatcher - WARNING - Received SIGINT signal
2024-12-07 17:00:30,558 - aiogram.dispatcher - INFO - Polling stopped for bot @priceguarddev_bot id=7683347152 - 'priceguarddev'
2024-12-07 17:00:30,559 - aiogram.dispatcher - INFO - Polling stopped
2024-12-07 17:00:30,726 - aiogram.dispatcher - WARNING - Received SIGINT signal
2024-12-07 17:00:57,011 - __main__ - INFO - Loading configuration...
2024-12-07 17:00:57,013 - __main__ - INFO - Initializing bot...
2024-12-07 17:00:57,032 - services.monitoring.monitor - INFO - Started promotion monitoring task
2024-12-07 17:00:57,032 - __main__ - INFO - Starting bot...
2024-12-07 17:00:57,032 - aiogram.dispatcher - INFO - Start polling
2024-12-07 17:00:57,032 - services.monitoring.monitor - ERROR - Error in monitoring loop: 'Database' object has no attribute 'get_active_subscriptions'
2024-12-07 17:00:57,368 - aiogram.dispatcher - INFO - Run polling for bot @priceguarddev_bot id=7683347152 - 'priceguarddev'
2024-12-07 17:01:07,535 - aiogram.event - INFO - Update id=20180932 is handled. Duration 459 ms by bot id=7683347152
2024-12-07 17:01:13,207 - aiogram.event - INFO - Update id=20180933 is handled. Duration 277 ms by bot id=7683347152
2024-12-07 17:01:17,293 - aiogram.event - INFO - Update id=20180934 is handled. Duration 255 ms by bot id=7683347152
2024-12-07 17:01:20,052 - aiogram.event - INFO - Update id=20180935 is handled. Duration 178 ms by bot id=7683347152
2024-12-07 17:01:25,218 - aiogram.event - INFO - Update id=20180936 is handled. Duration 225 ms by bot id=7683347152
2024-12-07 17:01:28,039 - aiogram.event - INFO - Update id=20180937 is handled. Duration 282 ms by bot id=7683347152
2024-12-07 17:01:30,417 - aiogram.event - INFO - Update id=20180938 is handled. Duration 202 ms by bot id=7683347152
2024-12-07 17:01:33,025 - aiogram.event - INFO - Update id=20180939 is handled. Duration 144 ms by bot id=7683347152
2024-12-07 17:01:34,620 - aiogram.event - INFO - Update id=20180940 is handled. Duration 265 ms by bot id=7683347152
2024-12-07 17:03:07,081 - bot.middlewares.error - ERROR - Error processing event from user 1879978399: process_ozon_api_key() missing 1 required positional argument: 'marketplace_factory'
Traceback (most recent call last):
  File "/Users/kagitin/CascadeProjects/priceguard/src/bot/middlewares/error.py", line 21, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/kagitin/CascadeProjects/priceguard/venv/lib/python3.13/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
                 ~~~~~~~^^
TypeError: process_ozon_api_key() missing 1 required positional argument: 'marketplace_factory'
2024-12-07 17:03:07,624 - aiogram.event - INFO - Update id=20180941 is handled. Duration 544 ms by bot id=7683347152
2024-12-07 17:03:27,631 - aiogram.dispatcher - WARNING - Received SIGINT signal
2024-12-07 17:03:27,632 - aiogram.dispatcher - INFO - Polling stopped for bot @priceguarddev_bot id=7683347152 - 'priceguarddev'
2024-12-07 17:03:27,633 - aiogram.dispatcher - INFO - Polling stopped
2024-12-07 17:05:09,776 - __main__ - INFO - Loading configuration...
2024-12-07 17:05:09,777 - __main__ - INFO - Initializing bot...
2024-12-07 17:05:09,800 - services.monitoring.monitor - INFO - Started promotion monitoring task
2024-12-07 17:05:09,801 - __main__ - INFO - Starting bot...
2024-12-07 17:05:09,802 - aiogram.dispatcher - INFO - Start polling
2024-12-07 17:05:09,802 - services.monitoring.monitor - ERROR - Error in monitoring loop: 'Database' object has no attribute 'get_active_subscriptions'
2024-12-07 17:05:10,453 - aiogram.dispatcher - INFO - Run polling for bot @priceguarddev_bot id=7683347152 - 'priceguarddev'
2024-12-07 17:05:18,338 - aiogram.event - INFO - Update id=20180942 is handled. Duration 362 ms by bot id=7683347152
2024-12-07 17:05:26,419 - aiogram.event - INFO - Update id=20180943 is handled. Duration 227 ms by bot id=7683347152
2024-12-07 17:05:28,844 - aiogram.event - INFO - Update id=20180944 is handled. Duration 214 ms by bot id=7683347152
2024-12-07 17:05:30,831 - aiogram.event - INFO - Update id=20180945 is handled. Duration 261 ms by bot id=7683347152
2024-12-07 17:05:34,269 - aiogram.event - INFO - Update id=20180946 is handled. Duration 144 ms by bot id=7683347152
2024-12-07 17:06:08,645 - aiogram.event - INFO - Update id=20180947 is not handled. Duration 1 ms by bot id=7683347152
2024-12-07 17:06:25,596 - aiogram.event - INFO - Update id=20180948 is handled. Duration 364 ms by bot id=7683347152
2024-12-07 17:06:27,295 - aiogram.event - INFO - Update id=20180949 is handled. Duration 134 ms by bot id=7683347152
2024-12-07 17:06:29,595 - aiogram.event - INFO - Update id=20180950 is handled. Duration 266 ms by bot id=7683347152
2024-12-07 17:06:33,052 - aiogram.event - INFO - Update id=20180951 is handled. Duration 138 ms by bot id=7683347152
2024-12-07 17:06:35,516 - aiogram.event - INFO - Update id=20180952 is handled. Duration 247 ms by bot id=7683347152
2024-12-07 17:06:37,207 - aiogram.event - INFO - Update id=20180953 is handled. Duration 299 ms by bot id=7683347152
2024-12-07 17:06:40,450 - aiogram.event - INFO - Update id=20180954 is handled. Duration 164 ms by bot id=7683347152
2024-12-07 17:06:42,537 - aiogram.event - INFO - Update id=20180955 is handled. Duration 202 ms by bot id=7683347152
2024-12-07 17:06:45,409 - aiogram.event - INFO - Update id=20180956 is handled. Duration 152 ms by bot id=7683347152
2024-12-07 17:07:04,507 - aiogram.event - INFO - Update id=20180957 is handled. Duration 363 ms by bot id=7683347152
2024-12-07 17:07:05,933 - aiogram.event - INFO - Update id=20180958 is handled. Duration 150 ms by bot id=7683347152
2024-12-07 17:07:18,331 - aiogram.event - INFO - Update id=20180959 is handled. Duration 229 ms by bot id=7683347152
2024-12-07 17:07:25,298 - aiogram.event - INFO - Update id=20180960 is handled. Duration 158 ms by bot id=7683347152
2024-12-07 17:07:26,906 - aiogram.event - INFO - Update id=20180961 is handled. Duration 129 ms by bot id=7683347152
2024-12-07 17:07:28,855 - aiogram.event - INFO - Update id=20180962 is not handled. Duration 3 ms by bot id=7683347152
2024-12-07 17:07:38,251 - aiogram.event - INFO - Update id=20180963 is not handled. Duration 3 ms by bot id=7683347152
2024-12-07 17:07:39,890 - aiogram.event - INFO - Update id=20180964 is handled. Duration 191 ms by bot id=7683347152
2024-12-07 17:07:42,601 - aiogram.event - INFO - Update id=20180965 is handled. Duration 259 ms by bot id=7683347152
2024-12-07 17:07:44,609 - aiogram.event - INFO - Update id=20180966 is handled. Duration 125 ms by bot id=7683347152
2024-12-07 17:07:46,337 - aiogram.event - INFO - Update id=20180967 is not handled. Duration 3 ms by bot id=7683347152
2024-12-07 17:07:47,977 - aiogram.event - INFO - Update id=20180968 is not handled. Duration 4 ms by bot id=7683347152
2024-12-07 17:11:50,155 - aiogram.dispatcher - WARNING - Received SIGINT signal
2024-12-07 17:11:50,156 - aiogram.dispatcher - INFO - Polling stopped for bot @priceguarddev_bot id=7683347152 - 'priceguarddev'
2024-12-07 17:11:50,157 - aiogram.dispatcher - INFO - Polling stopped
2024-12-07 17:17:24,640 - __main__ - INFO - Loading configuration...
2024-12-07 17:17:24,642 - __main__ - INFO - Initializing bot...
2024-12-07 17:17:24,662 - services.monitoring.monitor - INFO - Started promotion monitoring task
2024-12-07 17:17:24,662 - __main__ - INFO - Starting bot...
2024-12-07 17:17:24,662 - aiogram.dispatcher - INFO - Start polling
2024-12-07 17:17:24,662 - services.monitoring.monitor - ERROR - Error in monitoring loop: 'Database' object has no attribute 'get_active_subscriptions'
2024-12-07 17:17:25,466 - aiogram.dispatcher - INFO - Run polling for bot @priceguarddev_bot id=7683347152 - 'priceguarddev'
2024-12-07 17:17:32,778 - aiogram.event - INFO - Update id=20180969 is handled. Duration 425 ms by bot id=7683347152
2024-12-07 17:17:38,979 - aiogram.event - INFO - Update id=20180970 is handled. Duration 130 ms by bot id=7683347152
2024-12-07 17:17:42,353 - bot.middlewares.error - ERROR - Error processing event from user 743731: 'Database' object has no attribute 'get_all_users'
Traceback (most recent call last):
  File "/Users/kagitin/CascadeProjects/priceguard/src/bot/middlewares/error.py", line 21, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/kagitin/CascadeProjects/priceguard/venv/lib/python3.13/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "/Users/kagitin/CascadeProjects/priceguard/src/bot/handlers/admin.py", line 198, in on_admin_users
    users = await db.get_all_users()
                  ^^^^^^^^^^^^^^^^
AttributeError: 'Database' object has no attribute 'get_all_users'
2024-12-07 17:17:42,615 - aiogram.event - INFO - Update id=20180971 is handled. Duration 263 ms by bot id=7683347152
2024-12-07 17:18:02,073 - aiogram.dispatcher - WARNING - Received SIGINT signal
2024-12-07 17:18:02,073 - aiogram.dispatcher - INFO - Polling stopped for bot @priceguarddev_bot id=7683347152 - 'priceguarddev'
2024-12-07 17:18:02,074 - aiogram.dispatcher - INFO - Polling stopped
2024-12-07 17:19:02,300 - __main__ - INFO - Loading configuration...
2024-12-07 17:19:02,301 - __main__ - INFO - Initializing bot...
2024-12-07 17:19:02,319 - services.monitoring.monitor - INFO - Started promotion monitoring task
2024-12-07 17:19:02,319 - __main__ - INFO - Starting bot...
2024-12-07 17:19:02,319 - aiogram.dispatcher - INFO - Start polling
2024-12-07 17:19:02,319 - services.monitoring.monitor - ERROR - Error in monitoring loop: 'Database' object has no attribute 'get_active_subscriptions'
2024-12-07 17:19:02,653 - aiogram.dispatcher - INFO - Run polling for bot @priceguarddev_bot id=7683347152 - 'priceguarddev'
2024-12-07 17:19:16,489 - aiogram.event - INFO - Update id=20180972 is handled. Duration 380 ms by bot id=7683347152
2024-12-07 17:19:20,259 - aiogram.event - INFO - Update id=20180973 is handled. Duration 137 ms by bot id=7683347152
2024-12-07 17:19:21,720 - bot.middlewares.error - ERROR - Error processing event from user 743731: fromisoformat: argument must be str
Traceback (most recent call last):
  File "/Users/kagitin/CascadeProjects/priceguard/src/bot/middlewares/error.py", line 21, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/kagitin/CascadeProjects/priceguard/venv/lib/python3.13/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "/Users/kagitin/CascadeProjects/priceguard/src/bot/handlers/admin.py", line 208, in on_admin_users
    text += format_user_info(user) + "\n"
            ~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/kagitin/CascadeProjects/priceguard/src/bot/utils/messages.py", line 142, in format_user_info
    end_date = datetime.fromisoformat(end_date).strftime("%d.%m.%Y")
               ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
TypeError: fromisoformat: argument must be str
2024-12-07 17:19:22,024 - aiogram.event - INFO - Update id=20180974 is handled. Duration 306 ms by bot id=7683347152
2024-12-07 17:19:58,259 - aiogram.event - INFO - Update id=20180975 is handled. Duration 453 ms by bot id=7683347152
2024-12-07 17:20:03,452 - aiogram.event - INFO - Update id=20180976 is handled. Duration 138 ms by bot id=7683347152
2024-12-07 17:20:06,865 - aiogram.event - INFO - Update id=20180977 is handled. Duration 368 ms by bot id=7683347152
2024-12-07 17:20:08,951 - aiogram.event - INFO - Update id=20180978 is handled. Duration 294 ms by bot id=7683347152
2024-12-07 17:20:14,951 - aiogram.event - INFO - Update id=20180979 is handled. Duration 268 ms by bot id=7683347152
2024-12-07 17:20:16,962 - aiogram.event - INFO - Update id=20180980 is handled. Duration 189 ms by bot id=7683347152
2024-12-07 17:20:19,866 - aiogram.event - INFO - Update id=20180981 is handled. Duration 160 ms by bot id=7683347152
2024-12-07 17:20:21,732 - aiogram.event - INFO - Update id=20180982 is handled. Duration 293 ms by bot id=7683347152
2024-12-07 17:20:24,805 - aiogram.event - INFO - Update id=20180983 is handled. Duration 134 ms by bot id=7683347152
2024-12-07 17:20:26,249 - aiogram.event - INFO - Update id=20180984 is handled. Duration 200 ms by bot id=7683347152
2024-12-07 17:20:29,558 - aiogram.event - INFO - Update id=20180985 is handled. Duration 234 ms by bot id=7683347152
2024-12-07 17:20:55,975 - aiogram.event - INFO - Update id=20180986 is handled. Duration 352 ms by bot id=7683347152
2024-12-07 17:21:01,670 - aiogram.dispatcher - WARNING - Received SIGINT signal
2024-12-07 17:21:01,670 - aiogram.dispatcher - INFO - Polling stopped for bot @priceguarddev_bot id=7683347152 - 'priceguarddev'
2024-12-07 17:21:01,670 - aiogram.dispatcher - INFO - Polling stopped
2024-12-07 17:21:13,145 - __main__ - INFO - Loading configuration...
2024-12-07 17:21:13,146 - __main__ - INFO - Initializing bot...
2024-12-07 17:21:13,163 - services.monitoring.monitor - INFO - Started promotion monitoring task
2024-12-07 17:21:13,163 - __main__ - INFO - Starting bot...
2024-12-07 17:21:13,163 - aiogram.dispatcher - INFO - Start polling
2024-12-07 17:21:13,163 - services.monitoring.monitor - ERROR - Error in monitoring loop: 'Database' object has no attribute 'get_active_subscriptions'
2024-12-07 17:21:13,493 - aiogram.dispatcher - INFO - Run polling for bot @priceguarddev_bot id=7683347152 - 'priceguarddev'
2024-12-07 17:21:32,620 - aiogram.event - INFO - Update id=20180987 is handled. Duration 363 ms by bot id=7683347152
2024-12-07 17:21:38,196 - aiogram.event - INFO - Update id=20180988 is handled. Duration 139 ms by bot id=7683347152
2024-12-07 17:21:40,040 - aiogram.event - INFO - Update id=20180989 is handled. Duration 503 ms by bot id=7683347152
2024-12-07 17:22:23,053 - aiogram.dispatcher - WARNING - Received SIGINT signal
2024-12-07 17:22:23,054 - aiogram.dispatcher - INFO - Polling stopped for bot @priceguarddev_bot id=7683347152 - 'priceguarddev'
2024-12-07 17:22:23,054 - aiogram.dispatcher - INFO - Polling stopped
2024-12-07 17:28:57,370 - __main__ - INFO - Loading configuration...
2024-12-07 17:28:57,371 - __main__ - INFO - Initializing bot...
2024-12-07 17:28:57,389 - services.monitoring.monitor - INFO - Started promotion monitoring task
2024-12-07 17:28:57,389 - __main__ - INFO - Starting bot...
2024-12-07 17:28:57,390 - aiogram.dispatcher - INFO - Start polling
2024-12-07 17:28:57,390 - services.monitoring.monitor - ERROR - Error in monitoring loop: 'Database' object has no attribute 'get_active_subscriptions'
2024-12-07 17:28:58,154 - aiogram.dispatcher - INFO - Run polling for bot @priceguarddev_bot id=7683347152 - 'priceguarddev'
2024-12-07 17:28:58,291 - bot.middlewares.auth - INFO - New user registered: 1879978399
2024-12-07 17:28:58,720 - aiogram.event - INFO - Update id=20180990 is handled. Duration 433 ms by bot id=7683347152
2024-12-07 17:29:05,691 - aiogram.event - INFO - Update id=20180991 is handled. Duration 146 ms by bot id=7683347152
2024-12-07 17:29:07,864 - aiogram.event - INFO - Update id=20180992 is handled. Duration 303 ms by bot id=7683347152
2024-12-07 17:29:09,484 - aiogram.event - INFO - Update id=20180993 is handled. Duration 253 ms by bot id=7683347152
2024-12-07 17:30:08,026 - services.marketplaces.factory - ERROR - Error creating ozon client: 
2024-12-07 17:30:08,198 - aiogram.event - INFO - Update id=20180994 is handled. Duration 617 ms by bot id=7683347152
2024-12-07 17:30:41,884 - aiogram.dispatcher - WARNING - Received SIGINT signal
2024-12-07 17:30:41,884 - aiogram.dispatcher - INFO - Polling stopped for bot @priceguarddev_bot id=7683347152 - 'priceguarddev'
2024-12-07 17:30:41,885 - aiogram.dispatcher - INFO - Polling stopped
2024-12-07 17:35:13,016 - __main__ - INFO - Loading configuration...
2024-12-07 17:35:13,017 - __main__ - INFO - Initializing bot...
2024-12-07 17:35:13,034 - services.monitoring.monitor - INFO - Started promotion monitoring task
2024-12-07 17:35:13,034 - __main__ - INFO - Starting bot...
2024-12-07 17:35:13,035 - aiogram.dispatcher - INFO - Start polling
2024-12-07 17:35:13,035 - services.monitoring.monitor - ERROR - Error in monitoring loop: 'Database' object has no attribute 'get_active_subscriptions'
2024-12-07 17:35:13,813 - aiogram.dispatcher - INFO - Run polling for bot @priceguarddev_bot id=7683347152 - 'priceguarddev'
2024-12-07 17:35:17,350 - aiogram.event - INFO - Update id=20180995 is handled. Duration 404 ms by bot id=7683347152
2024-12-07 17:35:18,645 - aiogram.event - INFO - Update id=20180996 is handled. Duration 260 ms by bot id=7683347152
2024-12-07 17:35:33,963 - services.marketplaces.base - ERROR - Connection error: 404, message='Attempt to decode JSON with unexpected mimetype: text/plain; charset=utf-8', url='https://api-seller.ozon.ru/v1/product/info/list'
2024-12-07 17:35:33,964 - services.marketplaces.factory - ERROR - Error creating ozon client: Invalid ozon API key
2024-12-07 17:35:34,137 - aiogram.event - INFO - Update id=20180997 is handled. Duration 780 ms by bot id=7683347152
